#ifndef IG_MKDIR_REC_HSP
#define IG_MKDIR_REC_HSP

#module

#defcfunc dir_exists str path,  local dummy, local index
	dirlist dummy, path, 5
	return (stat != 0)

#deffunc mkdir_rec str _path,  \
	local path, local dirs, local dir
	
	path = _path
	strrep path, "\\", "/"
	split  path, "/", dirs
	
	sdim dir, strlen(path) + 1
	poke dir, 0, dirs(0)
	index = strsize
	repeat stat - 1, 1
		if ( dirs(cnt) == "" ) { continue }
		
		poke dir, index, '/'       : index ++
		poke dir, index, dirs(cnt) : index += strsize
		if ( dir_exists(dir) == 0 ) {
			mkdir dir
		}
	loop
	return
	
#global

#endif
