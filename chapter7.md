# Gitのコミット

前回のギトギット！ (♬)

0. GitHub のアカウントを作った！
0. GitHub にリポジトリを作った！
0. GitHub リポジトリに git push してバックアップを作った！

[序文](README.md) で触れた内容は前回で完遂し、みなさんは git をバックアップツールとして使いこなせるようになりました。
さて、今回から **第2部** です。Gitの底力はまだまだこんなもんじゃないですからね！

いままで git add と git commit については、あまり詳しく話していませんでした。
今回はこれを詳しく解説します。

いままで直接は説明しませんでしたが、git commit を行うと、「前回の git commit より後にした変更」がリポジトリに記録されます。
このときの「記録」のことを、まとめて1個の **コミットオブジェクト**(commit object) と呼びます。
(単にコミットと略すのが一般的です。)

コミットオブジェクトには、以下のような情報が記録されています。

* コミットメッセージ
* コミットした人のユーザ名とメアド
* 変更後のファイル
* 親コミットオブジェクトたちのハッシュ値
* (他にもありますが、省略)

上3つはみなさんもご存知でしょう。
気になるのは「親コミットオブジェクト」ですね。

コミットオブジェクトの間には親子関係があります。
[第5回 Gitの記録](chapter5.md) で使った git log の結果を引用して説明します。

```
$ git log --oneline
3456001 7 回目の更新  [= HEAD]
  ↓
1720f58 6 回目の更新
  ↓
99bd126 5 回目の更新
  ↓
96a691b 4 回目の更新
  ↓
3a7f2d9 3 回目の更新
  ↓
70e529a 2 回目の更新
  ↓
dfb29ca 1 回目の更新  [親なしコミット]
```

ここでの矢印は、「子 → 親」という関係を表しています。
git log は、最新のコミットオブジェクト 3456001 (= HEAD) から始めて、親へ親へと辿っていくことで、コミットオブジェクト (のハッシュ値とメッセージ) を一覧にしていたのです。



## 参考文献
* [もうGitは怖くない： 自信を持って使いたいあなたへ - 檜山正幸のキマイラ飼育記](http://d.hatena.ne.jp/m-hiyama/20150928/1443397382) (2016年3月18日閲覧)
  * コミットグラフに関する、日本語で読めるかなり詳しい解説。
